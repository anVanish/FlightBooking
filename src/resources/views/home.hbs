<!-- start banner Area -->
<section class="banner-area relative">
  <div class="overlay overlay-bg"></div>
  <div class="container">
    <div class="row fullscreen align-items-center justify-content-between">
      <div class="col-lg-6 col-md-6 banner-left">
        <h6 class="text-white">Khám phá Việt Nam</h6>
        <h1 class="text-white">Đặt vé máy bay</h1>
        <p class="text-white">
          Phục vụ bạn bằng sự tận tình của chúng tôi, kèm theo nhiều ưu đãi cho
          những giây phút thư giãn trên các chuyến bay
        </p>
        <a href="#" class="primary-btn text-uppercase">Bắt đầu</a>
      </div>
      <div class="col-lg-4 col-md-6 banner-right" style="margin-top:6rem">
        <div class="tab-content" id="myTabContent">
          <div
            class="tab-pane fade show active"
            id="flight"
            role="tabpanel"
            aria-labelledby="flight-tab"
          >
            <form class="form-wrap" id="form-search" method="POST" action="/flight">
              <!-- From -->
              <div class="input-group-icon mt-10 form-control py-0">
                <div class="form-select form-select-from" id="default-select">
                  <select name="from" id="select-from">
                    <option>Từ</option>
                    {{#each airports}}
                    <option value="{{this._id}}" class="option">{{this.city}} ({{this.code}})</option>
                    {{/each}}
                  </select>
                </div>
              </div>
              <!-- To -->
              <div class="input-group-icon mt-10 form-control py-0">
                <div class="form-select form-select-to" id="default-select">
                  <select name="to" id="select-to">
                    <option>Đến</option>
                    {{#each airports}}
                    <option value="{{this._id}}" class="option">{{this.city}} ({{this.code}})</option>
                    {{/each}}
                  </select>
                </div>
              </div>
              <input
                type="text"
                class="form-control date-picker"
                name="startDate"
                placeholder="Ngày đi "
                onfocus="this.placeholder = ''"
                onblur="this.placeholder = 'Ngày đi '"
              />
              <input
                type="text"
                class="form-control date-picker"
                name="returnDate"
                placeholder="Ngày về "
                onfocus="this.placeholder = ''"
                onblur="this.placeholder = 'Ngày về '"
              />
              <input
                type="number"
                min="1"
                max="20"
                class="form-control"
                name="members"
                placeholder="Hành khách "
                onfocus="this.placeholder = ''"
                onblur="this.placeholder = 'Người lớn '"
              />
              <div class="button-group-area mb-30">
                <a
                  href=""
                  onclick="event.preventDefault()"
                  id="btn-one-way"
                  class="genric-btn success circle"
                >Một chiều</a>
                <a
                  href=""
                  onclick="event.preventDefault()"
                  id="btn-round-trip"
                  class="genric-btn success-border circle"
                >Khứ hồi</a>
              </div>
              <input type="checkbox" name="oneWay" style="display: none">
              <button type="submit" id="find-flight" class="primary-btn text-uppercase">Tìm Chuyến bay</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End banner Area -->

<!-- Start popular-destination Area -->
<section class="popular-destination-area section-gap">
  <div class="container">
    <div class="row d-flex justify-content-center">
      <div class="menu-content pb-70 col-lg-8">
        <div class="title text-center">
          <h1 class="mb-10">Khám phá chuyến bay phổ biến</h1>
          <p>Sống trọn vẹn con tim</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-4">
        <div class="single-destination relative">
          <div class="thumb relative">
            <div class="overlay overlay-bg"></div>
            <img class="img-fluid" src="img/d1.jpg" alt="" />
          </div>
          <div class="desc">
            <a href="#" class="price-btn">Đặt vé</a>
            <h4>Hà Nội đi Nha Trang</h4>
            <p>12/04/2023</p>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="single-destination relative">
          <div class="thumb relative">
            <div class="overlay overlay-bg"></div>
            <img class="img-fluid" src="img/d2.jpg" alt="" />
          </div>
          <div class="desc">
            <a href="#" class="price-btn">Đặt vé</a>
            <h4>Đà Nẵng đi TP.Hồ Chí Minh</h4>
            <p>16/02/2023</p>
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="single-destination relative">
          <div class="thumb relative">
            <div class="overlay overlay-bg"></div>
            <img class="img-fluid" src="img/d3.jpg" alt="" />
          </div>
          <div class="desc">
            <a href="#" class="price-btn">Đặt vé</a>
            <h4>Huế đi Hà Nội</h4>
            <p>16/04/2023</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End popular-destination Area -->

<!-- Start blog Area -->
<section class="recent-blog-area section-gap">
  <div class="container">
    <div class="row d-flex justify-content-center">
      <div class="menu-content pb-60 col-lg-9">
        <div class="title text-center">
          <h1 class="mb-10">Bài viết mới nhất</h1>
          <p>Hiểu hơn về chúng tôi thông qua các bài viết</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="active-recent-blog-carusel">
        {{#each pops}}
        <div class="single-recent-blog-post item">
          <div class="thumb">
            <img class="img-fluid" src="{{this.image}}" alt="" />
          </div>
          <div class="details">
            <a href="blog/{{this.article_id}}"><h4 class="title hide-content-1">{{this.header}}</h4></a>
            <p class="hide-content-3">
              {{this.content}}.
            </p>
            <h6 class="date">{{this.public_date}} ({{this.view}} Views)</h6>
          </div>
        </div>
        {{/each}}
      </div>
    </div>
  </div>
</section>
<!-- End recent-blog Area -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
      $('input[name=oneWay]').prop('checked', true)

      var oneWay = document.getElementById('btn-one-way')
      var roundTrip = document.getElementById('btn-round-trip')
      $('input[name="returnDate"]').css('display', 'none')

      oneWay.addEventListener('click', (e)=>{
        e.preventDefault();
        oneWay.classList.add('success')
        oneWay.classList.remove('success-border')
        roundTrip.classList.remove('success')
        roundTrip.classList.add('success-border')
        $('input[name="returnDate"]').css('display', 'none').val('')
        $('input[name=oneWay]').prop('checked', true)
      })
      roundTrip.addEventListener('click', ()=>{
          roundTrip.classList.add('success')
          roundTrip.classList.remove('success-border')
          oneWay.classList.remove('success')
          oneWay.classList.add('success-border')
          $('input[name="returnDate"]').css('display', 'block')
          $('input[name=oneWay]').prop('checked', false)
      })

      $('#find-flight').on('click', function(e){
        e.preventDefault()
        $.ajax({
            url: '/flight/check',
            method: 'post',
            data: $('#form-search').serialize(),
            success: function (res) {
                if (res.err) {
                  showToast(res.message, "error");
                }
                else {
                  $('#form-search').submit()
                }
            }
        })
      })
  })

</script>
